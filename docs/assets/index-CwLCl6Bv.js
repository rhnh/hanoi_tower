(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const w=["a","b","c"],P=["1","2","3","4","5","6","7","8","9"],L=3,D=9,A=3,g=9,m=e=>({map:t=>m(t(e)),fold:t=>t(e),toStrong:()=>console.log(e)});function I(e){return e}function N(e){let t;const n=()=>(t===void 0&&(t=e()),t);return n.clear=()=>{t=void 0},n}const C=w.map(e=>P.map(t=>`${e}${t}`)).flat(),K=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],T=e=>t=>{const n=t[0]*e.width/A,r=t[1]*e.height/g;return[n,r]},x=e=>C[g*e[0]+e[1]],B=e=>t=>{let n=Math.floor(A*(t[0]-e.left)/e.width),r=Math.floor(g*(t[1]-e.top)/e.height);return n>=0&&n<g&&r>=0&&r<g?[n,r]:[-1,-1]},V=(e,t)=>{let n=e.board.firstChild;for(;n;){if(n.dataset.key===t&&n.tagName==="DISC")return n;n=n.nextSibling}return null},$=(e,t)=>{const n=new Map;if(!t)return e;for(const[r,i]of e){if(!t)return e;r.startsWith(t[0])&&n.set(r,i)}return n},R=(e,t)=>{const n=$(e,t);for(const[r,i]of n)if(i!=="0")return r;return null},_=e=>{let t=!1;for(const[n,r]of e)if(r=="0")t=!0;else return!1;return t},p=({discs:e,keyToFind:t,previous:n=!1})=>{const r=$(e,t);let i="a1";if(_(r))return`${t[0]}9`;for(const[s,c]of r)if(c!=="0"){i=s;break}const o=n?+i[1]-1:i[1];return i=`${i[0]}${o}`,i},k=e=>{const{board:t,discs:n}=e;for(let r=0;r<3;r++){const i=`${String.fromCharCode(97+r)}${r+1}`,o=p({discs:n,keyToFind:i}),s=t.querySelector(`[data-key=${o}]`);s&&(s.dataset.draggable="yes")}return e},q=e=>new Map([...e].filter(([t,n])=>+n!=0)),z=(e,t)=>!t||t[0]==="a"?!1:q($(e.discs,t)).size===e.totalDiscs;function X(e,t,n,r){let i=[];function o(s,c,l,u){s!==0&&(o(s-1,c,u,l),i.push(`${c},${l}`),o(s-1,u,l,c))}return o(e,t,n,r),i}function b(e=3){const t=new Map;C.map(r=>t.set(r,"0"));let n=e+1;for(;e;){let r=`a${10-e}`,i=`${n-e}`;t.set(r,`${i}`),e-=1}return t}function v(){const e=document.getElementById("container"),t=document.createElement("div");e?.parentElement?.appendChild(t);const n=document.createElement("board"),r=N(()=>n.getBoundingClientRect());t.id="moves-section",t.classList.add("moves-section");const i={discs:b(),selected:{draggingElement:null,isDragging:!1},isViewOnly:!1,container:e,board:n,bounds:r,counter:0,totalDiscs:3,gameState:"init"};return W(i,e),e?.appendChild(n),i}function Y(e,t){const n=document.createElement("disc"),r=T(e.bounds())(K(t));return n.style.transform=`translate(${r[0]}px, ${r[1]}px)`,n.style.width=`${e.bounds().width/L}px`,n.style.height=`${e.bounds().height/D}px`,n.style.display="block",n.style.position="absolute",n}const d=e=>(requestAnimationFrame(()=>{m(M(e)(k)).map(O)}),e),M=e=>t=>{const{discs:n}=e;e.board.innerHTML="";for(const[r,i]of n){const o=Y(e,r);o.dataset.key=r,o.dataset.value=i,o.classList.add(`disc-${i}`),i!="0"&&o.classList.add("disc"),o.style.textAlign="center",o.style.zIndex="100",e.board.appendChild(o)}return G(e),t(e)},y=e=>document.createElementNS("http://www.w3.org/2000/svg",e),G=e=>{const t=e.board,n=document.createElement("section");return t.appendChild(n),e.board.classList.add(e.gameState),O(e),w.map(()=>{const r=y("svg"),i=y("rect");r.setAttribute("viewBox",`0 0 ${e.bounds().width} ${e.bounds().height*3}`),i.setAttribute("height",`${e.bounds().height*2}`),i.setAttribute("fill","#03045e"),i.setAttribute("width","10"),i.setAttribute("x","50%"),i.setAttribute("y","0"),i.setAttribute("rx","10"),r.appendChild(i);const o=y("rect"),s=e.bounds().width-50;r.setAttribute("viewBox",`0 0 ${e.bounds().width} ${e.bounds().height*3}`),o.setAttribute("width",`${s}`),o.setAttribute("fill","#03045e"),o.setAttribute("height","20"),o.setAttribute("rx","10"),o.setAttribute("x","20"),o.setAttribute("y","-10"),r.appendChild(o),n.appendChild(r)}),e};function W(e,t){const n=document.createElement("article");t.appendChild(n),n.classList.add("status-bar"),n.id="status-bar";const r=document.createElement("span");r.id="counter",n.appendChild(r);const i=document.createElement("span");return i.classList.add("btn-section"),i.appendChild(a("Start","startBtn")(()=>{if(e.gameState==="over"){e.container.innerHTML="",window.location.reload();const o=v();o.gameState="playing",d(o);return}e.gameState="playing",d(e)})),i.appendChild(a("+","addBtn")(()=>{if(e.gameState!=="init"||e.totalDiscs>=9)return;let o=e.totalDiscs+1;e.totalDiscs=o,e.totalDiscs>=9&&(o=9),e.discs=b(o),d(e)})),i.appendChild(a("-","removeBtn")(()=>{if(e.gameState!=="init"||e.totalDiscs<=3)return;let o=e.totalDiscs-1;e.totalDiscs=o,e.discs=b(o),d(e)})),i.appendChild(a("Restart","restartBtn")(()=>{e.gameState="playing",d(e),window.location.reload()})),i.appendChild(a("Solve","solveBtn")(()=>{if(e.gameState!=="init")return;const o=e.container?.parentElement?.querySelector("#moves-section");o?.scrollIntoView({behavior:"smooth",block:"center"}),X(e.totalDiscs,"a1","c1","b1").map((s,c)=>{e.gameState="playing",setTimeout(()=>{const l=s.split(","),u=l[0];e.counter++;const h=R(e.discs,u);if(!h)return;const F=e.discs.get(h);e.discs.set(h,"0");const E=l[1],H=p({discs:e.discs,keyToFind:E,previous:!0}),f=document.createElement("span");f.innerHTML=`${c+1}. ${u[0]} > ${E[0]}<br>`,f.style.fontSize="10px";let S;o&&(S=o?.scrollHeight-o?.clientHeight<=+o?.scrollTop),!S&&o&&(o.scrollTop=o?.scrollHeight-o?.clientHeight,o?.appendChild(f)),o?.appendChild(f),e.discs.set(H,F),c===2**e.totalDiscs-2&&setTimeout(()=>{e.container.innerHTML="",t?.parentElement?.removeChild(o),d(v())},1e3),d(e)},c*1e3)})})),n.appendChild(i),t}const a=(e,t)=>n=>{const r=document.createElement("button");return r.classList.add("btn"),t&&r.classList.add(t),r.innerHTML=e,r.addEventListener("click",n),r},O=e=>{const t=e.container.querySelector("#counter");return t&&(t.innerHTML=`Moves: ${e.counter} Best: ${Math.pow(2,e.totalDiscs)-1}`),e};function U(e){const{board:t}=e;return t.addEventListener("pointerdown",n=>{if(e.gameState!=="playing")return;const r=B(e.bounds())([n.clientX,n.clientY]),i=x(r);if(!i)return;const o=V(e,i);o&&o.dataset.value!=="0"&&o.dataset.draggable&&(o.style.zIndex="1000",e.selected.originKey=i,e.selected.originValue=o.dataset.value,e.selected.draggingElement=o,e.selected.isDragging=!0)}),e}function j(e,t,n){e.selected.draggingElement&&e.selected.isDragging&&(e.selected.draggingElement.style.transform=`translate(${t-e.bounds().left-e.bounds().width/L/2}px, ${n-e.bounds().top-e.bounds().height/D/2}px)`)}function J(e){const{board:t}=e;return t.addEventListener("pointermove",n=>{j(e,n.clientX,n.clientY)}),e}function Q(e,t){const n=B(e.bounds())([t.clientX,t.clientY]);let r=x(n);const i=p({discs:e.discs,keyToFind:r,previous:!1}),o=p({discs:e.discs,keyToFind:r,previous:!0}),s=Number(e.discs.get(i)),c=Number(e.selected.originValue),l=e.selected.originKey;c>s&&l&&c&&s==0&&(e.discs.set(i,`${c}`),e.discs.set(l,"0"),e.counter=e.counter+1),c<s&&l&&(e.discs.set(o,`${c}`),e.discs.set(l,"0"),e.counter=e.counter+1),e.selected.draggingElement=null,e.selected.originKey=void 0,e.selected.originValue=void 0,e.gameState=z(e,r)?"over":"playing",e.gameState==="over"&&ne(e)}function Z(e){if(e.selected.draggingElement&&e.selected.originKey&&e.selected.isDragging){const t=e.selected.originKey,n=T(e.bounds())(K(t));e.selected.draggingElement.style.transform=`translate(${n[0]}px,${n[1]}px)`,e.selected.draggingElement.style.zIndex="1000",e.selected.isDragging=!1}}function ee(e){const{board:t}=e;return t.addEventListener("pointerup",n=>{e.gameState!=="over"&&(Z(e),Q(e,n),M(e)(k))}),e}function te(e){return m(e).map(U).map(J).map(ee).fold(I)}const ne=e=>(e.gameState&&(e.board.style.opacity="0.3"),e);m(v()).map(d).map(te);
